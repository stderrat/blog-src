{{ partial "header.html" . }}


{{/* 
  Get pages for the current section only (not parent or sibling sections).
  This ensures subcategories like /integrations/azure/ only show Azure articles.
  
  We filter all site pages by checking if their URL starts with 
  the current section's URL path.
*/}}

{{/* Get the current section's URL path */}}
{{ $currentPath := .RelPermalink }}

{{/* Collect pages whose URL starts with the current path */}}
{{ $pages := slice }}
{{ range site.RegularPages }}
  {{ if hasPrefix .RelPermalink $currentPath }}
    {{ $pages = $pages | append . }}
  {{ end }}
{{ end }}

{{/* Sort by date descending */}}
{{ $section := sort $pages "Date" "desc" }}

{{/* Check to see if the section has pages */}}
{{ $section_count := len $section }}

{{ if ge $section_count 1 }}

  <div class="article-cards-grid">

	{{/* Section title */}}
	<h1 class="flex-none recentlist gradient-header article">
		<em class="gradient-header">{{ .Param "recent_copy" | default (i18n "summaryTitle" .) }}</em>
	</h1>
	{{/* fix n_post to 10000 since we want to show ALL on the summary page */}}
	{{ $n_posts := 10000 }}


	<section class="article-cards-container">
	  {{/* Range through the first $n_posts items of the section */}}
	  {{ range (first $n_posts $section) }}
		<div class="article-card summary-gradient relative ba b--moon-gray nested-copy-line-height weight-5">
			<div class="mb2 pa3 pa4-l gray">
		  {{ partial "summary-with-image.html" . }}
		</div>
		</div>
	  {{ end }}
	</section>
	</div>
{{ end }}

{{ if eq .Kind "section" }}
	{{ .Content }}
{{end}}

{{ if or (eq .Kind "taxonomy") (eq .Kind "term") }}
<ul>
	{{ range .Pages }}
		<li><a href="{{.RelPermalink}}">{{.Title}}</a></li>
	{{ end }}
</ul>
{{end}}

<footer class=" footline" >
	{{with .Params.LastModifierDisplayName}}
	    <i class='fas fa-user'></i> <a href="mailto:{{ $.Params.LastModifierEmail }}">{{ . }}</a> {{with $.Date}} <i class='fas fa-calendar'></i> {{ .Format "02/01/2006" }}{{end}}
	    </div>
	{{end}}
</footer>

{{ partial "footer.html" . }}
