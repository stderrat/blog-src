{{ partial "header.html" . }}

<h3>Archive</h3>
<div class="archive-by-month">
{{ $.Scratch.Set "prevYear" "" }}
{{ range sort (.Site.RegularPages.GroupByDate "2006-01") ".Key" "desc" }}
  {{ $monthDate := printf "%s-01" .Key | time }}
  {{ $year := $monthDate.Format "2006" }}
  {{ $monthKey := $monthDate.Format "2006-01" }}
  {{/* Add year anchor if this is a new year */}}
  {{ if ne $year ($.Scratch.Get "prevYear") }}
  <div id="{{ $year }}" class="archive-year-anchor"></div>
  {{ $.Scratch.Set "prevYear" $year }}
  {{ end }}
  <div id="{{ $monthKey }}" class="archive-month-group">
    <h3 class="archive-month-header">
      <i class="far fa-calendar-alt"></i> <span class="archive-month-name">{{ $monthDate.Format "January 2006" }}</span>
      <span class="archive-count">({{ len .Pages }})</span>
    </h3>
    <table class="archive-table">
    {{ range .Pages.ByDate.Reverse }}
      <tr>
        <td class="archivetable-date">
          <span class="date">{{ .Date.Format "Jan 02" }}</span>
        </td>
        <td class="archivetable-content">
          <archive><a class="archive" href="{{ .Permalink }}">{{ .Title }}</a></archive>
        </td>
      </tr>
    {{ end }}
    </table>
  </div>
{{ end }}
</div>

<footer class="footline">
	{{with .Params.LastModifierDisplayName}}
	    <i class='fas fa-user'></i> <a href="mailto:{{ $.Params.LastModifierEmail }}">{{ . }}</a> {{with $.Date}} <i class='fas fa-calendar'></i> {{ .Format "02/01/2006" }}{{end}}
	    </div>
	{{end}}
</footer>

{{ partial "footer.html" . }}
